# Руководство по внесению вклада в TaskFlow

Спасибо за ваш интерес к улучшению TaskFlow! Мы приветствуем вклад от сообщества и рады любой помощи, будь то исправление ошибок, добавление новых функций или улучшение документации.

## Кодекс поведения

Участвуя в этом проекте, вы соглашаетесь придерживаться нашего кодекса поведения:

- Будьте уважительны к другим участникам
- Используйте конструктивную критику
- Фокусируйтесь на том, что лучше для проекта
- Проявляйте эмпатию к другим членам сообщества

## Как внести вклад

### Сообщение об ошибках

Если вы нашли ошибку, создайте issue на GitHub со следующей информацией:

1. **Описание проблемы**: Четкое описание того, что пошло не так
2. **Шаги для воспроизведения**: Подробные шаги, чтобы воспроизвести проблему
3. **Ожидаемое поведение**: Что должно было произойти
4. **Фактическое поведение**: Что произошло вместо этого
5. **Скриншоты**: Если применимо, добавьте скриншоты
6. **Окружение**:
   - Версия VS Code
   - Версия TaskFlow
   - ОС (Windows/macOS/Linux)
   - Версия Node.js

**Шаблон issue для ошибок:**

```markdown
## Описание

[Краткое описание проблемы]

## Шаги для воспроизведения

1. [Первый шаг]
2. [Второй шаг]
3. [И так далее...]

## Ожидаемое поведение

[Что должно было произойти]

## Фактическое поведение

[Что произошло]

## Окружение

- VS Code версия: [e.g. 1.85.0]
- TaskFlow версия: [e.g. 0.1.0]
- ОС: [e.g. Windows 11]
- Node.js версия: [e.g. 18.16.0]

## Дополнительный контекст

[Любая дополнительная информация]
```

### Предложение новых функций

Перед тем как предложить новую функцию, проверьте, нет ли уже существующего issue. Если нет, создайте новый issue со следующим содержанием:

1. **Описание функции**: Что вы хотите добавить
2. **Мотивация**: Почему эта функция нужна
3. **Варианты реализации**: Как это можно реализовать
4. **Альтернативы**: Какие альтернативные решения вы рассматривали

**Шаблон issue для функций:**

```markdown
## Описание функции

[Краткое описание новой функции]

## Мотивация

[Почему эта функция важна и кому она поможет]

## Предложенное решение

[Как вы видите реализацию этой функции]

## Альтернативы

[Какие альтернативные подходы вы рассматривали]

## Дополнительный контекст

[Скриншоты, макеты, примеры из других проектов]
```

### Pull Requests

Мы активно принимаем pull requests. Процесс:

1. **Fork репозитория** на GitHub
2. **Клонируйте** ваш fork локально
3. **Создайте ветку** для вашей функции (`git checkout -b feature/AmazingFeature`)
4. **Внесите изменения** и закоммитьте их (`git commit -m 'Add some AmazingFeature'`)
5. **Push** в ветку (`git push origin feature/AmazingFeature`)
6. **Откройте Pull Request** на GitHub

#### Требования к Pull Request

- [ ] Код соответствует стилю проекта (проверено ESLint)
- [ ] Добавлены/обновлены тесты для новой функциональности
- [ ] Все тесты проходят (`npm test`)
- [ ] Обновлена документация (README.md, если нужно)
- [ ] Обновлен CHANGELOG.md
- [ ] Коммиты имеют осмысленные сообщения
- [ ] PR имеет четкое описание изменений

#### Пример описания PR

```markdown
## Изменения

- Добавлена функция X
- Исправлена ошибка Y
- Улучшена производительность Z

## Мотивация

[Почему эти изменения необходимы]

## Тестирование

[Как вы тестировали изменения]

## Скриншоты (если применимо)

[Добавьте скриншоты новых функций]

## Связанные Issues

Closes #123
```

## Процесс разработки

### Настройка окружения

```bash
# Fork и клонирование
git clone https://github.com/YOUR_USERNAME/taskflow.git
cd taskflow

# Добавление upstream
git remote add upstream https://github.com/ORIGINAL_OWNER/taskflow.git

# Установка зависимостей
npm install

# Компиляция
npm run compile
```

### Работа над функцией

```bash
# Создание новой ветки от main
git checkout -b feature/my-new-feature

# Ваша работа...
# Редактирование файлов

# Компиляция и проверка
npm run compile
npm run lint
npm test

# Коммит изменений
git add .
git commit -m "feat: add my new feature"

# Push в ваш fork
git push origin feature/my-new-feature
```

### Синхронизация с upstream

```bash
# Получение изменений из upstream
git fetch upstream

# Переход на main
git checkout main

# Merge изменений
git merge upstream/main

# Push в ваш fork
git push origin main
```

## Соглашения о коде

### Стиль кода

Проект использует ESLint для обеспечения единообразия кода:

```bash
npm run lint
```

Основные правила:

- Используйте TypeScript со strict mode
- 2 пробела для отступов
- Точка с запятой обязательна
- Избегайте `any` типа
- Используйте `const` вместо `let` где возможно
- Документируйте публичные методы JSDoc комментариями

### Именование

- **Файлы**: camelCase (например, `taskManager.ts`)
- **Классы**: PascalCase (например, `TaskManager`)
- **Функции/методы**: camelCase (например, `getTasks()`)
- **Константы**: UPPER_SNAKE_CASE (например, `MAX_TASKS`)
- **Интерфейсы**: PascalCase (например, `Task`)
- **Перечисления**: PascalCase (например, `TaskStatus`)

### Структура файлов

```typescript
// 1. Импорты
import * as vscode from "vscode";
import { Task } from "../models/task";

// 2. Константы
const DEFAULT_PRIORITY = "Средний";

// 3. Интерфейсы/типы
interface MyInterface {
  // ...
}

// 4. Класс/функции
export class MyClass {
  // Приватные поля
  private myField: string;

  // Конструктор
  constructor() {
    // ...
  }

  // Публичные методы
  public myMethod(): void {
    // ...
  }

  // Приватные методы
  private helperMethod(): void {
    // ...
  }
}
```

### Комментарии

Используйте JSDoc для документирования публичных API:

```typescript
/**
 * Получает задачу по идентификатору
 * @param id - Уникальный идентификатор задачи
 * @returns Задача или undefined если не найдена
 */
public getTaskById(id: string): Task | undefined {
  return this.tasks.find(task => task.id === id);
}
```

## Тестирование

### Написание тестов

Все новые функции должны сопровождаться тестами:

```typescript
import * as assert from "assert";
import { TaskManager } from "../../managers/taskManager";

suite("TaskManager Test Suite", () => {
  let taskManager: TaskManager;

  setup(() => {
    taskManager = new TaskManager(mockContext);
  });

  test("Should add task", async () => {
    const task = await taskManager.addTask({
      title: "Test task",
      status: TaskStatus.Pending,
      priority: Priority.Medium,
    });

    assert.ok(task.id);
    assert.strictEqual(task.title, "Test task");
  });
});
```

### Запуск тестов

```bash
# Все тесты
npm test

# Конкретный файл
npm test -- --grep "TaskManager"
```

## Коммиты

### Соглашение о коммитах

Мы следуем [Conventional Commits](https://www.conventionalcommits.org/):

```
<type>(<scope>): <subject>

<body>

<footer>
```

**Типы коммитов:**

- `feat`: Новая функция
- `fix`: Исправление ошибки
- `docs`: Изменения документации
- `style`: Форматирование, точки с запятой и т.д.
- `refactor`: Рефакторинг кода
- `perf`: Улучшение производительности
- `test`: Добавление тестов
- `chore`: Обслуживание, обновление зависимостей

**Примеры:**

```bash
feat(parser): add support for tags
fix(ui): correct task completion status display
docs(readme): update installation instructions
refactor(manager): simplify task filtering logic
test(parser): add tests for markdown parsing
```

## Документация

При добавлении новых функций, пожалуйста, обновите:

- **README.md**: Если функция затрагивает пользовательский интерфейс
- **DEVELOPMENT.md**: Если изменяется архитектура или API
- **CHANGELOG.md**: Всегда добавляйте запись о своих изменениях
- **JSDoc комментарии**: Для всех публичных методов

## Ревью кода

### Что мы проверяем

- ✅ Код работает как ожидается
- ✅ Следует соглашениям проекта
- ✅ Включает тесты
- ✅ Документация обновлена
- ✅ Нет явных багов или проблем с производительностью
- ✅ Изменения минимальны и сфокусированы

### Обратная связь

- Будьте открыты к конструктивной критике
- Отвечайте на комментарии ревьюеров
- Вносите запрошенные изменения
- Задавайте вопросы, если что-то непонятно

## Лицензия

Внося вклад в TaskFlow, вы соглашаетесь, что ваши вклады будут лицензированы под MIT License.

## Вопросы?

Если у вас есть вопросы о процессе внесения вклада:

- 📧 Email: dev@taskflow.dev
- 💬 GitHub Discussions
- 🐛 GitHub Issues

---

Спасибо за ваш вклад в TaskFlow! 🎉
