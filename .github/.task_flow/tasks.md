# Задачи

## Публикация

- [x] Опубликовать [Низкий]
  Опубликуй пожалуйста на Маркет данное расширение

- [x] Заменить логотип [Низкий]
  Сейчас нет логотипа. В маркете указывается стандартный логотип. Опиши куда мне надо скинуть дщпщтип в каком формате должен быть и как должен называться.


## V2.2

- [x] Редактивароние задач [Низкий]
  Давай сделаем так чтобы задачи можно было редактивать в окне, было бы круто если бы нажимая на задачу мы бы открывали окно редактирования и редактирвоали бы задачу в удобном UI

- [x] Сделать так, чтобы создании задач, можно было указать /ai и тогда через github copilot будет использован ии агент и текст задания будет составлен через ии агента [Низкий]
  Сделать так, чтобы создании задач, можно было указать /ai и тогда через github copilot будет использован ии агент и текст задания будет составлен через ии агента

- [x] Перетаскивать задачи [Низкий]
  Сделать так, чтобы в UI задачи из "ЗАДАЧИ" в "Очередь задач" можно было перетаскивать задачи зажав клавишу мыши


## V3.1

- [x] Срочность
  У нас есть срочность задач, я предлагаю сделать так, что когда задачи попадают в очередь, перед выполнением проверяется срочность и потом порядок меняется согласно срочности

- [x] Режим автоматического выполнения очереди [Высокий]
  Добавить настройку для автоматического выполнения задач в очереди без ручного подтверждения.
  
  ## Требования:
  
  1. **Новая настройка `taskflow.queueExecutionMode`**
     - Тип: выбор (enum)
     - Значения: "manual" (ручной, по умолчанию) / "automatic" (автоматический)
     - Описание: Режим выполнения задач в очереди
  
  2. **Новая настройка `taskflow.defaultTaskDuration`**
     - Тип: число (number)
     - Значение по умолчанию: 30
     - Единицы: минуты
     - Описание: Время выполнения задачи по умолчанию в автоматическом режиме
  
  3. **Логика работы:**
     - В режиме "manual": текущее поведение (ожидание подтверждения пользователя)
     - В режиме "automatic": 
       - После генерации кода через Copilot ожидается `defaultTaskDuration` минут
       - По истечении времени автоматически переходит к следующей задаче
       - Показывается таймер обратного отсчета
       - Пользователь может вручную завершить раньше времени
  
  4. **UI изменения:**
     - В автоматическом режиме показывать прогресс-бар с оставшимся временем
     - Кнопка "Завершить сейчас" для досрочного завершения
     - Кнопка "Пропустить" остается
  
  5. **Уведомления:**
     - "⏱️ Автоматическое выполнение: 25 минут осталось"
     - "✅ Задача автоматически завершена, начинается следующая"
  
  ## Технические детали:
  
  - Обновить `package.json` с новыми настройками
  - Модифицировать `CopilotIntegration.generateCodeForTask()`
  - Добавить таймер с отменой через `setTimeout` / `clearTimeout`
  - Сохранять handle таймера для возможности отмены

- [x] Индивидуальное время выполнения для задач [Высокий]
  Добавить возможность указывать индивидуальное время выполнения для каждой задачи.
  
  ## Требования:
  
  1. **Новое поле в модели Task:**
     ```typescript
     interface Task {
       // ... существующие поля
       executionDuration?: number; // Время выполнения в минутах (опционально)
     }
     ```
  
  2. **UI для создания задачи:**
     - Добавить поле "Время выполнения (минуты)" в `showAddTaskDialog`
     - Поле необязательное
     - Плейсхолдер: "30 (оставьте пустым для значения по умолчанию)"
     - Валидация: только положительные числа
  
  3. **UI в WebView редакторе:**
     - Добавить поле "Время выполнения" в `TaskEditorPanel`
     - Input type="number"
     - Min="1", placeholder="30 минут"
  
  4. **Логика в автоматическом режиме:**
     - Если `task.executionDuration` указано → использовать это значение
     - Если `task.executionDuration === undefined` → использовать `defaultTaskDuration` из настроек
     - Приоритет: индивидуальное время > настройка по умолчанию
  
  5. **Отображение в UI:**
     - В tooltip задачи показывать: "Время выполнения: 45 минут"
     - В описании задачи: иконка ⏱️ с временем
     - В очереди: показывать оставшееся время при выполнении
  
  6. **Markdown формат:**
     ```markdown
     - [ ] Создать API [Высокий] Срок: 2025-12-31 Время: 45мин
     ```
  
  ## Примеры использования:
  
  - Быстрая задача: 5-10 минут (рефакторинг, фикс)
  - Обычная задача: 30 минут (значение по умолчанию)
  - Сложная задача: 60-120 минут (новая feature)
  
  ## Технические детали:
  
  - Обновить `Task` интерфейс в `models/task.ts`
  - Модифицировать `MarkdownParser` для парсинга времени
  - Обновить `showAddTaskDialog` и `TaskEditorPanel`
  - Использовать в `CopilotIntegration` при автоматическом режиме


## V2.7

- [x] Убирать задачи из очереди [Низкий]
  Добавить функционал в UI чтобы убирать задачи из очереди. 

- [x] Менять в очереди задачи местами [Низкий]
  В UI drag and drop функционалом менять очередность задач

- [x] Убирать задачи из очереди [Низкий]
  Добавить функционал в UI чтобы убирать задачи из очереди.

- [x] Менять в очереди задачи местами [Низкий]
  В UI drag and drop функционалом менять очередность задач


## V2.9

- [x] AI создатель задач из API [Низкий]
  Должна быть настройка где мы сможем передать URL с которого можно получить список задач. Метод HTTP GET. После получения списка задач, необходимо результат дать ИИ агенту, чтобы тот создал группу задач (именовал ее на свое усмотрение, только добавил в конце дату и время). и в ней создал задачи в необходимом формате.


## V3.2

- [x] Редактирование более удобное [Низкий] Время: 10мин
  На странице задачи. Текст задачи сделать так, чтобы редактировать было удобно. Может добавить какой то плагин, чтобы это не просто TextArea а что то удобное с какими то инструментами

- [ ] AI на странице редактирования [Низкий] Время: 10мин
  На странице редактирования добавить раздел с кнопкой и input, в которую можно написать промпт для AI и результат этого промпта заменит текст задачи в textarea.
  
  Сам промпт для AI который отправится должен говорить что это для тех задания, и что надо дать текст который можно вставить как тех задание. Нужно также чтобы перед тем как написать тех задание, AI мог пройти по всем файлам в проекте и понять какое тех задание написать и на что ориентироваться. 

- [x] Оптимизация уведомлений при автоматической настройке выполнения задач [Низкий] Время: 10мин
  При автоматической настройке выполнения задач уведомления приходят каждую минуту и накладываются друг на друга, что создает неудобства для пользователя. Необходимо:  
  1. Реализовать механизм замены текущего уведомления новым (удаление или обновление существующего уведомления).  
  2. Либо добавить логику, чтобы уведомление отображалось только за 1 минуту до выполнения задачи.  
  3. Убедиться, что уведомления корректно обрабатываются в случае изменения времени выполнения задачи.  
  4. Провести тестирование, чтобы исключить дублирование уведомлений и проверить корректность их отображения.

- [x] Исправить некорректную работу drag-and-drop при перемещении задач в "ОЧЕРЕДЬ ЗАДАЧ" [Низкий] Время: 10мин
  Функционал перетаскивания задач из раздела "ЗАДАЧИ" в "ОЧЕРЕДЬ ЗАДАЧ" через drag-and-drop не работает корректно. На данный момент пользователь может схватить задачу и переместить её в "ОЧЕРЕДЬ ЗАДАЧ", но после этого никакие действия не выполняются, и задача не добавляется в очередь.  
  
  Необходимо:  
  1. Проверить обработчики событий drag-and-drop, связанные с перемещением задач.  
  2. Убедиться, что данные о задаче корректно передаются и обновляются в целевом списке.  
  3. Реализовать обновление состояния интерфейса после успешного перемещения задачи.  
  4. Добавить обработку ошибок и уведомление пользователя в случае некорректного выполнения операции.  
  5. Написать или обновить существующие тесты для проверки функциональности drag-and-drop.  
  
  Убедитесь, что после исправления задачи корректно отображаются в "ОЧЕРЕДИ ЗАДАЧ" и сохраняются в системе.

- [x] Реализация механизма записи результатов задачи в указанный источник данных [Низкий] Время: 10мин
  Необходимо разработать функционал, который будет записывать результаты выполнения задачи. И чтобы можно было посмотреть результат задачи в UI. Также требуется обновить текст для чата, чтобы он содержал информацию о том, куда именно записываются результаты.  Ключевые моменты реализации:  1. Результат должен быть коротким и содержательным без воды. 


## 3.3

- [x] Интеграция отправки текста из описания задачи в ИИ для генерации технического задания [Низкий]
  Текущая кнопка Генерировать генерирует тех задание на основе того тех задания которое мы даем ему в инпуте генерации описания. Но текущее описание тех задания не берет. Надо делать так, чтобы он передавал ИИ текущее описание задания тоже, чтобы сохранялся контекст тех задания которое улучшается. 

- [x] Реализация функционала для получения задач из YouTrack через API [Низкий]
  ### Описание
  Интеграция REST API YouTrack для импорта задач в проект `copilot_task_flow`. Необходимо реализовать функционал, который позволяет загружать задачи из YouTrack в локальное хранилище проекта (JSON) с использованием предоставленного API. Задачи будут расписаны в задачах с использованием ИИ copilot.
  
  ### Цели
  - Реализовать импорт задач из YouTrack через REST API.
  - Сохранить импортированные задачи в локальное JSON-хранилище.
  - Обеспечить возможность обновления задач при повторном импорте.
  
  ### Требования
  - Использовать REST API YouTrack для получения списка задач.
  - Реализовать обработку данных, полученных из API, с преобразованием их в формат, совместимый с локальной моделью задач (`src/models/task.ts`).
  - Добавить возможность указания URL YouTrack и токена API через настройки проекта.
  - Обеспечить обработку ошибок (например, недоступность API, неверный токен).
  
  ### Критерии завершения
  - [ ] Реализован функционал импорта задач из YouTrack через REST API.
  - [ ] Импортированные задачи корректно сохраняются в локальное JSON-хранилище.
  - [ ] Обеспечена обработка ошибок при взаимодействии с API.
  - [ ] Написаны и успешно проходят тесты для нового функционала.

- [x] Добавить необязательное поле "Тэг" к задачам в системе управления задачами [Низкий]
  ### Описание
  Добавление нового необязательного поля "Тэг" к сущности задачи. Поле должно быть доступно для указания при создании или редактировании задачи. Необходимо обеспечить валидацию данных, обновить интерфейсы и документацию, а также адаптировать API для поддержки нового поля.
  
  ### Цели
  - Расширить функциональность сущности задачи, добавив поле "Тэг".
  - Обеспечить корректное отображение и обработку нового поля в интерфейсе.
  - Гарантировать валидацию данных для поля "Тэг".
  
  ### Требования
  - Поле "Тэг" должно быть необязательным.
  - Длина тега должна быть ограничена (например, до 50 символов).
  - Допустимые символы: буквы, цифры, дефис, подчеркивание.
  - Поле должно быть доступно в интерфейсе создания и редактирования задачи.
  - API (если используется) должно поддерживать работу с новым полем.
  - Документация должна быть обновлена для отражения изменений.
  
  ### Критерии завершения
  - [ ] Поле `tag` добавлено в модель задачи.
  - [ ] Поле ввода для тега отображается в интерфейсе создания/редактирования задачи.
  - [ ] Реализована валидация данных для поля `tag`.
  - [ ] Обновлена документация проекта.
  - [ ] Написаны и успешно проходят тесты для нового функционала.

- [x] Добавить анализ контекста проекта для команды /ai перед генерацией технического задания [Низкий]
  ### Описание
  Реализация функциональности для команды `/ai`, которая будет анализировать контекст текущего проекта перед генерацией технического задания. Функциональность должна учитывать структуру проекта, используемые технологии и зависимости, а также корректно обрабатывать ошибки.
  
  ### Цели
  - Автоматизировать анализ контекста проекта для команды `/ai`.
  - Упростить процесс генерации технических заданий с учетом особенностей проекта.
  
  ### Требования
  - Определить ключевые параметры проекта для анализа:
    - Структура директорий и файлов.
    - Используемые технологии и зависимости.
    - Основные модули и их назначение.
  - Реализовать сбор и обработку данных о проекте.
  - Интегрировать этап анализа в процесс работы команды `/ai`.
  - Обеспечить обработку ошибок и уведомление пользователя в случае невозможности анализа.
  

- [x] Автоматическая запись результата выполнения программы с использованием ИИ [Низкий]
  По окончанию зади запрашивается результат у пользователя. У пользователя запрашивать не надо. Надо генерировать у ИИ.

- [ ] Интеграция подгрузки задач из Trello в приложение [Низкий] Очередь: 1
  ### Описание
  Интеграция с Trello API для работы с действиями (Actions). Необходимо реализовать функционал, позволяющий импортировать данные о действиях из Trello в проект, используя предоставленный REST API.
  
  ### Цели
  - Реализовать возможность подключения к Trello API для получения задач
  - Обеспечить обработку и сохранение полученных данных в формате, совместимом с текущей архитектурой проекта.
  
  ### Требования
  - Использовать библиотеку `axios` для выполнения HTTP-запросов.
  - Реализовать обработку данных в соответствии с моделью задач проекта. При необходимости использовать ИИ
  - Добавить возможность указания API ключа и токена для аутентификации.
  - Обеспечить обработку ошибок при взаимодействии с API.
  
  
  ### Критерии завершения
  - [ ] Реализован сервис `trelloActionImporter` для получения данных об действиях из Trello.
  - [ ] Данные из Trello корректно преобразуются в формат модели `task`.
  - [ ] Обеспечена обработка ошибок при взаимодействии с Trello API.
  - [ ] Написаны и успешно проходят тесты для нового функционала.
