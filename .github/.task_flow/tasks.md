# Задачи

## Публикация

- [x] Опубликовать [Низкий]
  Опубликуй пожалуйста на Маркет данное расширение

- [x] Заменить логотип [Низкий]
  Сейчас нет логотипа. В маркете указывается стандартный логотип. Опиши куда мне надо скинуть дщпщтип в каком формате должен быть и как должен называться.


## V2.2

- [x] Редактивароние задач [Низкий]
  Давай сделаем так чтобы задачи можно было редактивать в окне, было бы круто если бы нажимая на задачу мы бы открывали окно редактирования и редактирвоали бы задачу в удобном UI

- [x] Сделать так, чтобы создании задач, можно было указать /ai и тогда через github copilot будет использован ии агент и текст задания будет составлен через ии агента [Низкий]
  Сделать так, чтобы создании задач, можно было указать /ai и тогда через github copilot будет использован ии агент и текст задания будет составлен через ии агента

- [x] Перетаскивать задачи [Низкий]
  Сделать так, чтобы в UI задачи из "ЗАДАЧИ" в "Очередь задач" можно было перетаскивать задачи зажав клавишу мыши


## V3.1

- [x] Срочность
  У нас есть срочность задач, я предлагаю сделать так, что когда задачи попадают в очередь, перед выполнением проверяется срочность и потом порядок меняется согласно срочности

- [x] Режим автоматического выполнения очереди [Высокий]
  Добавить настройку для автоматического выполнения задач в очереди без ручного подтверждения.
  
  ## Требования:
  
  1. **Новая настройка `taskflow.queueExecutionMode`**
     - Тип: выбор (enum)
     - Значения: "manual" (ручной, по умолчанию) / "automatic" (автоматический)
     - Описание: Режим выполнения задач в очереди
  
  2. **Новая настройка `taskflow.defaultTaskDuration`**
     - Тип: число (number)
     - Значение по умолчанию: 30
     - Единицы: минуты
     - Описание: Время выполнения задачи по умолчанию в автоматическом режиме
  
  3. **Логика работы:**
     - В режиме "manual": текущее поведение (ожидание подтверждения пользователя)
     - В режиме "automatic": 
       - После генерации кода через Copilot ожидается `defaultTaskDuration` минут
       - По истечении времени автоматически переходит к следующей задаче
       - Показывается таймер обратного отсчета
       - Пользователь может вручную завершить раньше времени
  
  4. **UI изменения:**
     - В автоматическом режиме показывать прогресс-бар с оставшимся временем
     - Кнопка "Завершить сейчас" для досрочного завершения
     - Кнопка "Пропустить" остается
  
  5. **Уведомления:**
     - "⏱️ Автоматическое выполнение: 25 минут осталось"
     - "✅ Задача автоматически завершена, начинается следующая"
  
  ## Технические детали:
  
  - Обновить `package.json` с новыми настройками
  - Модифицировать `CopilotIntegration.generateCodeForTask()`
  - Добавить таймер с отменой через `setTimeout` / `clearTimeout`
  - Сохранять handle таймера для возможности отмены

- [x] Индивидуальное время выполнения для задач [Высокий]
  Добавить возможность указывать индивидуальное время выполнения для каждой задачи.
  
  ## Требования:
  
  1. **Новое поле в модели Task:**
     ```typescript
     interface Task {
       // ... существующие поля
       executionDuration?: number; // Время выполнения в минутах (опционально)
     }
     ```
  
  2. **UI для создания задачи:**
     - Добавить поле "Время выполнения (минуты)" в `showAddTaskDialog`
     - Поле необязательное
     - Плейсхолдер: "30 (оставьте пустым для значения по умолчанию)"
     - Валидация: только положительные числа
  
  3. **UI в WebView редакторе:**
     - Добавить поле "Время выполнения" в `TaskEditorPanel`
     - Input type="number"
     - Min="1", placeholder="30 минут"
  
  4. **Логика в автоматическом режиме:**
     - Если `task.executionDuration` указано → использовать это значение
     - Если `task.executionDuration === undefined` → использовать `defaultTaskDuration` из настроек
     - Приоритет: индивидуальное время > настройка по умолчанию
  
  5. **Отображение в UI:**
     - В tooltip задачи показывать: "Время выполнения: 45 минут"
     - В описании задачи: иконка ⏱️ с временем
     - В очереди: показывать оставшееся время при выполнении
  
  6. **Markdown формат:**
     ```markdown
     - [ ] Создать API [Высокий] Срок: 2025-12-31 Время: 45мин
     ```
  
  ## Примеры использования:
  
  - Быстрая задача: 5-10 минут (рефакторинг, фикс)
  - Обычная задача: 30 минут (значение по умолчанию)
  - Сложная задача: 60-120 минут (новая feature)
  
  ## Технические детали:
  
  - Обновить `Task` интерфейс в `models/task.ts`
  - Модифицировать `MarkdownParser` для парсинга времени
  - Обновить `showAddTaskDialog` и `TaskEditorPanel`
  - Использовать в `CopilotIntegration` при автоматическом режиме


## V2.7

- [x] Убирать задачи из очереди [Низкий]
  Добавить функционал в UI чтобы убирать задачи из очереди. 

- [x] Менять в очереди задачи местами [Низкий]
  В UI drag and drop функционалом менять очередность задач

- [x] Убирать задачи из очереди [Низкий]
  Добавить функционал в UI чтобы убирать задачи из очереди.

- [x] Менять в очереди задачи местами [Низкий]
  В UI drag and drop функционалом менять очередность задач


## V2.9

- [x] AI создатель задач из API [Низкий]
  Должна быть настройка где мы сможем передать URL с которого можно получить список задач. Метод HTTP GET. После получения списка задач, необходимо результат дать ИИ агенту, чтобы тот создал группу задач (именовал ее на свое усмотрение, только добавил в конце дату и время). и в ней создал задачи в необходимом формате.


## V3.2

- [x] Редактирование более удобное [Низкий] Время: 10мин
  На странице задачи. Текст задачи сделать так, чтобы редактировать было удобно. Может добавить какой то плагин, чтобы это не просто TextArea а что то удобное с какими то инструментами

- [x] AI на странице редактирования [Низкий] Время: 10мин Очередь: 1
  На странице редактирования добавить какую нибудь кнопку с input, в которую можно написать промпт для AI и результат этого промпта будет в виде задачи. Сам промпт для AI должен говорить что это для тех задания, и что надо дать текст который можно вставить как тех задание. Нужно также чтобы перед тем как написать тех задание, AI мог пройти по всем файлам в проекте и понять какое тех задание написать и на что ориентироваться. 

- [x] Оптимизация уведомлений при автоматической настройке выполнения задач [Низкий] Время: 10мин
  При автоматической настройке выполнения задач уведомления приходят каждую минуту и накладываются друг на друга, что создает неудобства для пользователя. Необходимо:  
  1. Реализовать механизм замены текущего уведомления новым (удаление или обновление существующего уведомления).  
  2. Либо добавить логику, чтобы уведомление отображалось только за 1 минуту до выполнения задачи.  
  3. Убедиться, что уведомления корректно обрабатываются в случае изменения времени выполнения задачи.  
  4. Провести тестирование, чтобы исключить дублирование уведомлений и проверить корректность их отображения.

- [x] Исправить некорректную работу drag-and-drop при перемещении задач в "ОЧЕРЕДЬ ЗАДАЧ" [Низкий] Время: 10мин
  Функционал перетаскивания задач из раздела "ЗАДАЧИ" в "ОЧЕРЕДЬ ЗАДАЧ" через drag-and-drop не работает корректно. На данный момент пользователь может схватить задачу и переместить её в "ОЧЕРЕДЬ ЗАДАЧ", но после этого никакие действия не выполняются, и задача не добавляется в очередь.  
  
  Необходимо:  
  1. Проверить обработчики событий drag-and-drop, связанные с перемещением задач.  
  2. Убедиться, что данные о задаче корректно передаются и обновляются в целевом списке.  
  3. Реализовать обновление состояния интерфейса после успешного перемещения задачи.  
  4. Добавить обработку ошибок и уведомление пользователя в случае некорректного выполнения операции.  
  5. Написать или обновить существующие тесты для проверки функциональности drag-and-drop.  
  
  Убедитесь, что после исправления задачи корректно отображаются в "ОЧЕРЕДИ ЗАДАЧ" и сохраняются в системе.

- [x] Реализация механизма записи результатов задачи в указанный источник данных [Низкий] Время: 10мин
  Необходимо разработать функционал, который будет записывать результаты выполнения задачи. И чтобы можно было посмотреть результат задачи в UI. Также требуется обновить текст для чата, чтобы он содержал информацию о том, куда именно записываются результаты.  Ключевые моменты реализации:  1. Результат должен быть коротким и содержательным без воды.
