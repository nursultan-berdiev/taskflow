# Обновление структуры хранения файлов TaskFlow

## Описание изменений

В этом обновлении мы изменили структуру хранения файлов расширения TaskFlow. Теперь все файлы, создаваемые расширением, находятся в выделенной папке `.github/.task_flow/`.

## Новая структура

### Было (до обновления):

```
.github/
├── .task_flow_state.json    # JSON файл с задачами
└── task_flow_tasks.md        # Markdown файл с задачами
```

### Стало (после обновления):

```
.github/
└── .task_flow/               # Новая папка для всех файлов расширения
    ├── .task_flow_state.json # JSON файл с задачами
    └── tasks.md              # Markdown файл с задачами
```

## Преимущества новой структуры

1. **Лучшая организация**: Все файлы TaskFlow находятся в одной папке
2. **Меньше беспорядка**: Папка `.github` остается чистой
3. **Легче управлять**: Можно игнорировать или коммитить всю папку целиком
4. **Стандартизация**: Следует лучшим практикам для расширений VS Code

## Что изменилось в коде

### 1. Конфигурация по умолчанию (`package.json`)

```json
{
  "taskflow.tasksFile": ".github/.task_flow/tasks.md"
}
```

### 2. TaskManager (`src/managers/taskManager.ts`)

- Обновлены пути для создания директорий
- JSON файл теперь создается в `.github/.task_flow/.task_flow_state.json`
- Markdown файл теперь создается в `.github/.task_flow/tasks.md`

### 3. Документация

Обновлены следующие файлы документации:
- `README.md`
- `QUICK_START.md`
- `TESTING_GUIDE.md`
- `WHATS_NEW.md`
- `CHANGELOG.md`
- `QUEUE_GUIDE.md`
- `REFACTORING_SUMMARY.md`
- `docs/TESTING_CHECKLIST_V2.0.1.md`

## Миграция для существующих пользователей

Если у вас уже есть файлы TaskFlow в старом формате, вам нужно:

### Автоматическая миграция

При первом запуске обновленного расширения:

1. Расширение создаст новую структуру папок `.github/.task_flow/`
2. Старые файлы останутся без изменений

### Ручная миграция (опционально)

Если вы хотите перенести существующие задачи:

```bash
# 1. Создать новую структуру папок
mkdir -p .github/.task_flow

# 2. Переместить существующие файлы (если есть)
mv .github/.task_flow_state.json .github/.task_flow/ 2>/dev/null || true
mv .github/task_flow_tasks.md .github/.task_flow/tasks.md 2>/dev/null || true

# 3. Перезапустить VS Code
```

### Очистка старых файлов

После успешной миграции можно удалить старые файлы:

```bash
# Удалить старые файлы (только если вы уверены, что миграция прошла успешно)
rm .github/.task_flow_state.json 2>/dev/null || true
rm .github/task_flow_tasks.md 2>/dev/null || true
```

## Обратная совместимость

Расширение по-прежнему поддерживает настройку `taskflow.tasksFile`, поэтому вы можете использовать свой собственный путь:

```json
{
  "taskflow.tasksFile": "путь/к/вашему/файлу.md"
}
```

Однако рекомендуется использовать новую структуру по умолчанию.

## Тестирование

Для проверки новой структуры:

1. Откройте VS Code с расширением TaskFlow
2. Выполните команду `TaskFlow: Инициализировать задачи`
3. Проверьте, что создана структура `.github/.task_flow/`
4. Создайте несколько задач
5. Убедитесь, что файлы создаются в правильной директории:

```bash
ls -la .github/.task_flow/
# Должно показать:
# .task_flow_state.json
# tasks.md
```

## Вопросы и ответы

**Q: Что будет со старыми задачами?**  
A: Старые файлы не будут удалены автоматически. Используйте инструкции по ручной миграции выше.

**Q: Можно ли использовать старую структуру?**  
A: Да, через настройку `taskflow.tasksFile`, но новая структура рекомендуется.

**Q: Нужно ли коммитить папку `.github/.task_flow/`?**  
A: Это зависит от вашего проекта. Обычно рекомендуется коммитить для совместной работы.

**Q: Можно ли добавить в `.gitignore`?**  
A: Да, если вы не хотите коммитить задачи:
```
.github/.task_flow/
```

## Версия

Эти изменения включены в версию **2.1.0** расширения TaskFlow.

---

**Дата создания**: 5 октября 2025 г.  
**Автор**: TaskFlow Development Team
